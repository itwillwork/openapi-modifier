# Пример использования openapi-modifier для генерации типов API

Этот пример демонстрирует использование `openapi-modifier` для модификации OpenAPI спецификации и последующей генерации TypeScript типов.

## Описание

В этом примере мы:
1. Модифицируем входную OpenAPI спецификацию с помощью `openapi-modifier`
2. Генерируем TypeScript типы из модифицированной спецификации
3. Патчим сгенерированные типы для улучшения их структуры

## Установка

```bash
npm install
```

## Структура проекта

```
.
├── input/                      # Директория с входными файлами
│   └── openapi.yaml           # Исходная OpenAPI спецификация
├── output/                     # Директория с выходными файлами
│   ├── openapi.yaml           # Модифицированная OpenAPI спецификация
│   └── generated-api-types.d.ts # Сгенерированные TypeScript типы
├── openapi-modifier.config.ts  # Конфигурация openapi-modifier
└── simple-text-file-modifier.config.ts # Конфигурация для патчинга типов
```

## Скрипты

В `package.json` определены следующие скрипты:

- `prepare-input-openapi` - Модифицирует входную OpenAPI спецификацию
- `generate-api-types` - Генерирует TypeScript типы из модифицированной спецификации
- `patch-api-types` - Патчит сгенерированные типы
- `start` - Запускает все скрипты последовательно
- `download-input-openapi` - Скачивает пример OpenAPI спецификации

## Конфигурация openapi-modifier

В файле `openapi-modifier.config.ts` определены следующие модификации:

1. Объединение с дополнительной OpenAPI спецификацией
2. Изменение базового пути эндпоинтов
3. Фильтрация внутренних путей
4. Удаление устаревших параметров
5. Исправление документации параметров
6. Патчинг схем
7. Удаление устаревших эндпоинтов
8. Оптимизация для генератора типов

## Конфигурация патчинга типов

В файле `simple-text-file-modifier.config.ts` определены следующие изменения:

1. Добавление предупреждения о автоматической генерации
2. Переименование пространства имен `Components` в `ApiComponents`
3. Переименование пространства имен `Paths` в `ApiEndpoints`

## Использование

Для запуска полного процесса генерации типов выполните:

```bash
npm run start
```

Это выполнит все шаги последовательно:
1. Модификация OpenAPI спецификации
2. Генерация TypeScript типов
3. Патчинг сгенерированных типов

## Результат

После выполнения скриптов в директории `output/` будут созданы:
- Модифицированная OpenAPI спецификация (`openapi.yaml`)
- Сгенерированные TypeScript типы с применёнными патчами (`generated-api-types.d.ts`) 