[üá∫üá∏ English](./README.md) | [üá∑üá∫ –†—É—Å—Å–∫–∏–π](./README-ru.md) | [üá®üá≥ ‰∏≠Êñá](./README-zh.md)


# –ü—Ä–∏–º–µ—Ä: Express —Å–µ—Ä–≤–µ—Ä —Å express-openapi-validator

–í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –ø–æ–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `express-openapi-validator` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ Express —Å–µ—Ä–≤–µ—Ä–µ, —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é `openapi-modifier`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `src/` ‚Äì –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `routes/` ‚Äì –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ Express
  - `services/` ‚Äì –°–µ—Ä–≤–∏—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
  - `index.ts` ‚Äì –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `specs/` ‚Äì OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - `openapi.json` ‚Äì –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è OpenAPI
  - `prepared-openapi.json` ‚Äì –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤)
- `openapi-modifier.config.ts` ‚Äì –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –î–æ—Å—Ç—É–ø–Ω—ã–µ npm-—Å–∫—Ä–∏–ø—Ç—ã

- `prepare-openapi` ‚Äì –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ `openapi-modifier`.
- `start` ‚Äì –ó–∞–ø—É—Å–∫–∞–µ—Ç Express —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–º–æ—â—å—é `ts-node`.
- `dev` ‚Äì –ó–∞–ø—É—Å–∫–∞–µ—Ç Express —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot reload —Å –ø–æ–º–æ—â—å—é `ts-node-dev`.
- `build` ‚Äì –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript –≤ JavaScript.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–∫—Ä–∏–ø—Ç `prepare-openapi` –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é OpenAPI (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ–Ω—è–µ—Ç base path, —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã) —Å –ø–æ–º–æ—â—å—é `openapi-modifier`.
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `specs/prepared-openapi.json` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `express-openapi-validator`.

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- `express-openapi-validator` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã —Å–æ–≥–ª–∞—Å–Ω–æ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–ª–∏ –æ—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ—à–∏–±–∫–∏.

### –ú–∞—Ä—à—Ä—É—Ç—ã Express
- –ú–∞—Ä—à—Ä—É—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `src/routes/` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞.
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º–µ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

2. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é:
```bash
npm run prepare-openapi
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
npm start
```

–ò–ª–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot reload:
```bash
npm run dev
```

4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞ –ø–æ ID
curl http://localhost:3000/api/v3/pet/1

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é API
curl http://localhost:3000/spec
```

## –ü—Ä–∏–º–µ—Ä—ã API

### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å

–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
```bash
curl -X GET "http://localhost:3000/api/v3/pet/1"
```

–û—Ç–≤–µ—Ç:
```json
{"id":1,"name":"sparky","status":"available","photoUrls":["https://example.com/sparky.jpg"],"tags":[{"name":"sweet"}]}
```

### –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è –∏–∑-–∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```bash
curl -X GET "http://localhost:3000/api/v3/pet/not-a-number"
```

–û—Ç–≤–µ—Ç:
```json
{"message":"request/params/petId must be integer","errors":[{"path":"/params/petId","message":"must be integer","errorCode":"type.openapi.validation"}]}
```

## –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –Ω–∞–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –≤ `openapi-modifier.config.ts`:
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ base path —Å `/` –Ω–∞ `/api/v3/`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ `GET /api/v3/pet/{petId}`
- –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

