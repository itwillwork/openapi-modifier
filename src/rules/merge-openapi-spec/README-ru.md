# Правило merge-openapi-spec

## Описание
Правило позволяет объединить две OpenAPI спецификации в одну. Оно может объединить компоненты, пути и другие элементы из разных спецификаций, с возможностью контроля конфликтов при слиянии. Поддерживает работу с файлами в форматах JSON и YAML.

## Конфигурация
Правило принимает объект конфигурации со следующей структурой:

```json
{
  "path": "./specs/additional-api.yaml",
  "ignoreOperarionCollisions": false,
  "ignoreComponentCollisions": false
}
```

где:
- `path` - путь к файлу OpenAPI спецификации, которую нужно объединить с текущей (может быть абсолютным или относительным)
- `ignoreOperarionCollisions` (опционально) - флаг, указывающий, следует ли игнорировать конфликты операций при слиянии (по умолчанию false)
- `ignoreComponentCollisions` (опционально) - флаг, указывающий, следует ли игнорировать конфликты компонентов при слиянии (по умолчанию false)

## Мотивация создания правила
Правило было создано для случаев, когда необходимо:
1. Объединить спецификации нескольких микросервисов в единую документацию
2. Добавить общие компоненты или эндпоинты из базовой спецификации
3. Интегрировать дополнительные API пути в существующую спецификацию
4. Создать комплексную документацию API из нескольких частей

## Случаи использования в других проектах
Правило может быть полезно в следующих сценариях:

1. Объединение API документации микросервисов
2. Интеграция общих компонентов из базовой спецификации
3. Создание полной документации API из частичных спецификаций
4. Добавление новых путей API без изменения основной спецификации

## Примеры использования

### Пример 1: Объединение микросервисов
```json
{
  "path": "./services/users-service/openapi.yaml",
  "ignoreOperarionCollisions": false,
  "ignoreComponentCollisions": false
}
```

### Пример 2: Добавление общих компонентов
```json
{
  "path": "./common/base-components.json",
  "ignoreComponentCollisions": true
}
```

### Пример 3: Интеграция дополнительных путей
```json
{
  "path": "./specs/additional-endpoints.yaml",
  "ignoreOperarionCollisions": true
}
```

### Важные замечания
1. Правило поддерживает форматы файлов `.json`, `.yml` и `.yaml`
2. При обнаружении конфликтов операций или компонентов (если соответствующие флаги игнорирования не установлены):
   - Процесс слияния прерывается
   - В лог выводится список конфликтующих элементов
   - Исходная спецификация остается неизменной
3. Слияние выполняется с помощью глубокого объединения объектов
4. Если путь к файлу не указан или файл не найден, правило выводит предупреждение и оставляет спецификацию без изменений
5. При использовании относительных путей, они разрешаются относительно текущего рабочего каталога 