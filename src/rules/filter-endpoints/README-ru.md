# Правило filter-endpoints

## Описание
Правило позволяет фильтровать эндпоинты в OpenAPI спецификации на основе их путей и методов. С его помощью можно явно указать, какие эндпоинты должны быть сохранены или удалены из спецификации. Правило поддерживает как точное соответствие, так и фильтрацию по регулярным выражениям.

## Конфигурация
Правило принимает объект конфигурации со следующей структурой:

```json
{
  "enabled": [
    { "path": "/api/v1/users", "method": "GET" },
    { "path": "/api/v1/orders/*" }
  ],
  "enabledPathRegExp": [
    "^/api/v1/products.*"
  ],
  "disabled": [
    { "path": "/api/v1/admin", "method": "POST" },
    { "path": "/internal/*" }
  ],
  "disabledPathRegExp": [
    "^/api/v1/deprecated.*"
  ],
  "printIgnoredEndpoints": true
}
```

где:
- `enabled` (опционально) - массив объектов, описывающих эндпоинты, которые должны быть сохранены
- `enabledPathRegExp` (опционально) - массив регулярных выражений для путей, которые должны быть сохранены
- `disabled` (опционально) - массив объектов, описывающих эндпоинты, которые должны быть удалены
- `disabledPathRegExp` (опционально) - массив регулярных выражений для путей, которые должны быть удалены
- `printIgnoredEndpoints` (опционально) - флаг для вывода списка игнорируемых эндпоинтов в лог

## Мотивация создания правила
Правило было создано для случаев, когда необходимо:
1. Создать специализированную версию API с ограниченным набором эндпоинтов
2. Удалить внутренние или административные эндпоинты из публичной документации
3. Отфильтровать устаревшие или тестовые эндпоинты
4. Подготовить документацию API для конкретной роли или группы пользователей

## Случаи использования в других проектах
Правило может быть полезно в следующих сценариях:

1. Создание публичной версии API документации
2. Фильтрация эндпоинтов по уровням доступа
3. Подготовка документации для конкретного микросервиса
4. Создание специализированных версий API для разных клиентов

## Примеры использования

### Пример 1: Публичное API
```json
{
  "enabled": [
    { "path": "/api/v1/public/*" }
  ],
  "disabled": [
    { "path": "/api/v1/public/admin/*" }
  ]
}
```

### Пример 2: API для мобильного приложения
```json
{
  "enabledPathRegExp": [
    "^/api/v1/mobile/.*",
    "^/api/v1/common/.*"
  ],
  "printIgnoredEndpoints": true
}
```

### Пример 3: Фильтрация по методам
```json
{
  "enabled": [
    { "path": "/api/v1/users", "method": "GET" },
    { "path": "/api/v1/users", "method": "POST" }
  ],
  "disabled": [
    { "path": "/api/v1/users", "method": "DELETE" }
  ]
}
```

### Важные замечания
1. Если указаны и `enabled`, и `disabled`, сначала применяются правила `enabled`, затем `disabled`
2. При использовании регулярных выражений убедитесь, что они корректно экранированы в JSON
3. Правило выводит предупреждения для эндпоинтов, указанных в конфигурации, но не найденных в спецификации
4. При удалении всех методов для конкретного пути, путь также удаляется из спецификации
5. Параметр `printIgnoredEndpoints` полезен для отладки и проверки работы правила 