# Правило remove-deprecated

## Описание
Правило позволяет удалить устаревшие (deprecated) элементы из OpenAPI спецификации. Оно может удалять устаревшие компоненты, эндпоинты, параметры и свойства, при этом предоставляя возможность игнорировать определенные элементы и показывать описания удаляемых элементов.

## Конфигурация
Правило принимает объект конфигурации со следующей структурой:

```json
{
  "ignoreComponents": [
    { "componentName": "LegacyUser" }
  ],
  "ignoreEndpoints": [
    { "path": "/api/v1/legacy", "method": "GET" }
  ],
  "ignoreEndpointParameters": [
    { "path": "/api/users", "method": "GET", "name": "sort", "in": "query" }
  ],
  "showDeprecatedDescriptions": true
}
```

где:
- `ignoreComponents` (опционально) - массив компонентов, которые не должны быть удалены, даже если они помечены как устаревшие
- `ignoreEndpoints` (опционально) - массив эндпоинтов, которые не должны быть удалены
- `ignoreEndpointParameters` (опционально) - массив параметров эндпоинтов, которые не должны быть удалены
- `showDeprecatedDescriptions` (опционально) - флаг для вывода описаний удаляемых элементов в лог

## Мотивация создания правила
Правило было создано для случаев, когда необходимо:
1. Очистить API от устаревших элементов
2. Подготовить новую версию API без устаревшего функционала
3. Упростить документацию путем удаления неактуальных частей
4. Автоматизировать процесс удаления устаревших элементов

## Случаи использования в других проектах
Правило может быть полезно в следующих сценариях:

1. Подготовка новой мажорной версии API
2. Очистка спецификации перед публикацией
3. Аудит и удаление устаревших элементов
4. Создание чистой версии API для новых клиентов

## Примеры использования

### Пример 1: Базовая очистка
```json
{
  "showDeprecatedDescriptions": true
}
```

### Пример 2: Сохранение критических компонентов
```json
{
  "ignoreComponents": [
    { "componentName": "BaseError" },
    { "componentName": "AuthResponse" }
  ],
  "showDeprecatedDescriptions": true
}
```

### Пример 3: Выборочное сохранение эндпоинтов
```json
{
  "ignoreEndpoints": [
    { "path": "/api/v1/auth", "method": "POST" },
    { "path": "/api/v1/legacy/*", "method": "*" }
  ],
  "ignoreEndpointParameters": [
    { "path": "/api/v1/search", "method": "GET", "name": "format", "in": "query" }
  ],
  "showDeprecatedDescriptions": false
}
```

### Важные замечания
1. Правило удаляет элементы, помеченные как `deprecated: true`
2. Удаление происходит рекурсивно - если компонент помечен как устаревший, удаляются все его ссылки
3. При удалении эндпоинта удаляются все его методы
4. Правило проверяет и разрешает ссылки ($ref) перед принятием решения об удалении
5. Если включен `showDeprecatedDescriptions`, в лог выводятся описания всех удаляемых элементов
6. Правило выводит предупреждения для игнорируемых компонентов, которые не были найдены
7. Удаление происходит атомарно - либо все подходящие элементы удаляются, либо спецификация остается без изменений
8. При работе с путями поддерживаются wildcards (*) для игнорирования групп эндпоинтов 